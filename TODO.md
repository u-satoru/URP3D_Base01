# TODO - 2025年9月22日

## 本日の目標
3層アーキテクチャへの移行作業を開始する。
移行準備（フェーズ0）を完了し、Assembly Definitionの導入（フェーズ1）による依存関係の可視化（意図的なコンパイルエラーの発生）までを達成する。

**参照タスクリスト**: `Assets/_Project/Docs/Works/20250922_1015/3-Layer-Architecture-Migration-Detailed-Tasks.md`

---

## 準備フェーズ (Phase 0)
**目的**: 移行作業全体のリスクを低減し、安全な基盤を確立する。

-   [ ] **(Task 0.1) 移行ブランチの作成**
    -   **内容**: `main`ブランチから`feature/3-layer-architecture-migration`ブランチを作成し、チェックアウトする。
    -   **完了条件**: 新しいブランチで作業を開始できる状態であること。

-   [ ] **(Task 0.2) 既存テストの完全性を保証**
    -   **内容**: UnityのTest Runnerを開き、EditModeとPlayModeの全てのテストを実行する。
    -   **完了条件**: 全てのテストが100%パスすることを確認する。

-   [ ] **(Task 0.3) プロジェクトの完全バックアップ**
    -   **内容**: プロジェクトフォルダ全体をZIPなどで圧縮し、安全な場所に保管する。
    -   **完了条件**: バックアップファイルが作成され、いつでも復元できる状態であること。

-   [ ] **(Task 0.4) パフォーマンスベースラインの測定**
    -   **内容**: 主要シーン（タイトル、メインゲーム等）でUnity Profilerを実行し、結果を記録する。
    -   **完了条件**: FPS、CPU、メモリ使用量などのデータが記録され、後で比較できる状態であること。

---

## 基盤整備フェーズ (Phase 1)
**目的**: 3層間の依存関係をコンパイラレベルで強制し、意図しない参照を不可能にする。

-   [ ] **(Task 1.1) Core層 Assembly Definition の作成**
    -   **内容**: `Assets/_Project/Core`に`asterivo.Unity60.Core.asmdef`を作成する。
    -   **完了条件**: ファイルが作成され、Unityの再コンパイルが完了すること。

-   [ ] **(Task 1.2) Feature層 Assembly Definition の作成**
    -   **内容**: `Assets/_Project/Features`配下の各機能フォルダ（`Player`, `AI`, `UI`など）に、対応する`.asmdef`ファイルを作成し、`asterivo.Unity60.Core`への参照を追加する。
    -   **完了条件**: 全ての`Feature`フォルダに`.asmdef`が配置されていること。

-   [ ] **(Task 1.3) Template層 Assembly Definition の作成**
    -   **内容**: `Assets/_Project/Features/Templates`配下の各ジャンルフォルダに、対応する`.asmdef`ファイルを作成し、依存する`Feature`の`.asmdef`への参照を追加する。
    -   **完了条件**: 全ての`Template`フォルダに`.asmdef`が配置されていること。

-   [ ] **(Task 1.4) 意図的なコンパイルエラーの確認**
    -   **内容**: Unity Editorのコンソールを確認し、依存関係違反によるコンパイルエラーが大量に発生していることを確認する。
    -   **完了条件**: コンパイルエラーが発生している状態を「フェーズ1の完了」として認識し、その状況を記録（スクリーンショット等）すること。

---

## 本日のゴール
-   上記リストの **(Task 1.4)** までを完了させる。
-   プロジェクトが、リファクタリングを開始するための準備が整った「制御された失敗」状態になる。