# **サバイバルホラーゲーム 詳細設計書**

## **1. 概要**

本ドキュメントは「現代的サバイバルホラー体験におけるコアゲームコンテンツ要件定義書」に基づき、ゲームを実装するための詳細な仕様を定義するものである。

### **1.1. 設計思想**

* **没入感の最大化:** プレイヤーがゲーム世界に「存在する」感覚を最優先する。UIは可能な限りダイジェティック（ゲーム世界内に統合された）なものを採用する。  
* **システム間の連携:** 各システム（戦闘、探索、心理、ナラティブ）は独立せず、相互に影響を与え合うことで、要件定義書にある「無力化と主体性の中心的緊張関係」を生み出す。  
* **拡張性:** 新たな敵、アイテム、パズルを追加しやすいよう、データ駆動型のアプローチを基本とする。

### **1.2. 開発ターゲット**

* **プラットフォーム:** PC (Steam), PlayStation 5, Xbox Series X|S  
* **ゲームエンジン:** Unreal Engine 5 (またはUnity)  
* **視点:** 一人称視点 (VRサポートをコア機能として設計)

## **2. ゲームシステム詳細仕様**

### **2.1. プレイヤーシステム (PlayerCharacter)**

脆弱な一般人である主人公の無力感と必死さを表現するためのシステム。

| 機能 | 詳細仕様 |
| :---- | :---- |
| **移動** | - 通常移動、歩き（静音）、スプリント（スタミナ消費）、しゃがみ（静音・隠密）を実装。 - スタミナが切れると一定時間スプリント不可となり、息切れのアニメーションとSEが再生される。 |
| **体力 (Health)** | - 数値は非表示。ダメージを受けると画面に血しぶきエフェクト、視界のモノクロ化、心音SEの上昇で表現。 - 体力が一定以下になると移動速度が低下し、足を引きずるアニメーションに変化する。 |
| **スタミナ (Stamina)** | - 数値は非表示。スプリントや緊急回避行動で消費。時間経過で自動回復。 - 息遣いの荒さでプレイヤーにスタミナ残量を伝える。 |
| **インタラクション** | - ドアの開閉、アイテムの取得、ギミックの操作、隠れる（ロッカー、ベッド下など）が可能。 - ドアはゆっくり開ける（隙間から中を覗く）操作と、勢いよく開ける操作を区別する。 |
| **インベントリ** | - グリッドベースの厳格なスロット数制限（例: 8スロット）。 - キーアイテムは専用スロットに格納され、通常のスロットを圧迫しない。 - アイテムの組み合わせ（クラフト）が可能。 |

### **2.2. 戦闘システム**

戦闘は「絶望的な最終手段」として設計する。

| 機能 | 詳細仕様 |
| :---- | :---- |
| **近接攻撃** | - ナイフなどの基本的な武器。スタミナを消費し、威力は低い。 - 主に木箱の破壊や、ダウンした敵への追撃に使用。 - 敵の攻撃をタイミングよくガードすることで、敵を怯ませる「パリィ」が可能だが、リスクが高い。 |
| **遠距離攻撃** | - ハンドガン、ショットガンなど。弾薬は極めて希少。 - 主観視点での照準。照準中は移動速度が大幅に低下し、手ブレが発生する。 - 「正気度」が低いと手ブレがさらに大きくなる。 |
| **ダメージ計算** | - ダメージ = 武器基礎威力 * 部位倍率 - 敵の防御力 - ヘッドショットは高倍率のダメージを与える。特定の敵には弱点部位が存在する。 |
| **リロード** | - 意図的に遅く、隙の大きいアニメーションを再生する。インベントリ画面からではなく、リアルタイムでのリロードを基本とする。 |

### **2.3. 敵システム**

恐怖の担い手として、多様なAIと役割を持つ敵を設計する。

#### **2.3.1. 通常敵 (StandardEnemy)**

* **AIタイプ:** 巡回/配置AI。決められたルートを巡回したり、特定の部屋で待機したりする。  
* **索敵ロジック:** 視覚（ライトの光にも反応）と聴覚（プレイヤーの足音、物音）でプレイヤーを検知する。  
* **行動パターン:** プレイヤーを発見すると追跡し、攻撃範囲に入ると攻撃を行う。プレイヤーを見失うと、最後の目撃地点周辺を警戒し、その後巡回ルートに戻る。

#### **2.3.2. ストーカー (StalkerEnemy)**

* **AIタイプ:** システム的/狩人AI。特定のエリア全体を徘徊し、プレイヤーを能動的に追跡する。  
* **永続性:** 基本的に倒すことはできない。一定量のダメージを与えると一時的にダウンするが、時間経過で復活する。  
* **特殊能力:** ドアを開けることができる（一部の鍵のかかったドアは破壊する）。プレイヤーの立てた物音に敏感に反応し、音源を調査する。  
* **制限:** セーフルームには侵入できない。ストーカーの接近は、特徴的な足音やBGMの変化でプレイヤーに予兆される。

### **2.4. 心理（正気度）システム (SanityManager)**

プレイヤーの恐怖をメカニクス化し、ゲームプレイに直接的な影響を与える。

| 機能 | 詳細仕様 |
| :---- | :---- |
| **正気度メーター** | - 0から100の内部パラメータ。UIには表示しない。 |
| **減少トリガー** | - 長時間暗闇にいる。 - 敵（特にストーカー）を直視し続ける。 - 敵からダメージを受ける。 - 超常的なイベント（ポルターガイストなど）を目撃する。 |
| **回復手段** | - セーフルームに滞在する。 - 特定の消費アイテム（例: 精神安定剤）を使用する。 |
| **段階的影響** | - 高 (70-100): 正常。 - 中 (40-69): 幻聴（囁き声、遠くの物音）、視界の端に一瞬だけ幻覚（人影など）が見える。 - 低 (10-39): 武器の手ブレが大きくなる。視界が歪み始める。幻覚がより明確になる。 - 危険 (0-9): 操作が不安定になることがある（入力遅延など）。敵を引き寄せやすくなる。 |

### **2.5. レベルと探索**

閉所恐怖と相互接続性を重視したレベルデザイン。

| 機能 | 詳細仕様 |
| :---- | :---- |
| **マップシステム** | - プレイヤーは探索したエリアや、入手した地図の断片によってマップを埋めていく。 - 施錠されたドア、パズルの場所、重要なアイテムの位置などを手動または自動で記録できる。 |
| **セーフルーム** | - 敵が侵入できない安全地帯。 - アイテムボックスとセーブポイントが設置されている。 - 心を落ち着かせるBGMが流れる。 |
| **環境ストーリー** | - 日記、手紙、ボイスレコーダー、PCのログなどを配置。 - オブジェクトの配置や部屋の状態から、過去に起こった出来事を推測できるように設計する。 |

### **2.6. セーブシステム**

高難易度ではリソースベースのセーブを採用。

| 難易度 | セーブ仕様 |
| :---- | :---- |
| **ノーマル** | - セーフルームで無制限に手動セーブ可能。 - 主要なイベント後にオートセーブ。 |
| **ハード** | - セーフルームでの手動セーブのみ。 - セーブには有限の消費アイテム（例: カセットテープ）が必要。 |

## **3. クラス設計（概要）**

主要なゲームオブジェクトの責務を定義する。

* PlayerCharacter: プレイヤーの入力受付、移動、アクション（攻撃、インタラクト）の実行、状態管理（体力、正気度など）。  
* InventoryComponent: プレイヤーにアタッチされるコンポーネント。アイテムの追加、削除、使用、組み合わせを管理。  
* EnemyControllerBase: 全ての敵の基底クラス。索敵、移動、攻撃などの基本的なAIロジックを保持。  
  * StandardEnemyController: 巡回AIを実装。  
  * StalkerEnemyController: 狩人AIを実装。  
* InteractableObjectBase: プレイヤーがインタラクション可能な全てのオブジェクト（アイテム、ドア、ギミック）の基底クラス。  
* SanityManager: シングルトンクラス。正気度の増減を管理し、その影響（ポストプロセスエフェクト、オーディオ再生など）を各システムに伝達する。  
* GameManager: ゲーム全体の進行管理、セーブ・ロードの実行、ポーズ管理など。

## **4. データ構造（例）**

データ駆動設計のためのデータフォーマット例。JSONやDataTableでの管理を想定。

### **4.1. アイテムデータ (Items.json)**

[  
  {  
    "ItemID": "WEP_Handgun_01",  
    "ItemName": "標準的なハンドガン",  
    "Description": "一般的な9mm口径の拳銃。信頼性は高い。",  
    "ItemType": "Weapon",  
    "SlotSize": 2,  
    "Parameters": {  
      "Damage": 10,  
      "AmmoType": "Ammo_9mm"  
    }  
  },  
  {  
    "ItemID": "CON_FirstAid_S",  
    "ItemName": "救急スプレー（小）",  
    "Description": "傷口に吹き付け、体力を少し回復する。",  
    "ItemType": "Consumable",  
    "SlotSize": 1,  
    "Effect": "Heal",  
    "EffectValue": 30  
  },  
  {  
    "ItemID": "KEY_Mansion_Crest",  
    "ItemName": "洋館の紋章",  
    "Description": "洋館のどこかにある扉を開くための紋章。",  
    "ItemType": "KeyItem",  
    "SlotSize": 1  
  }  
]

### **4.2. 敵キャラクターデータ (Enemies.json)**

[  
  {  
    "EnemyID": "STD_Creature_A",  
    "EnemyName": "ウォーカー",  
    "AIType": "Standard",  
    "Health": 100,  
    "AttackDamage": 15,  
    "MoveSpeed": 1.5,  
    "SightRange": 10,  
    "HearingRange": 15,  
    "Weakness": "Head"  
  },  
  {  
    "EnemyID": "STK_ThePursuer",  
    "EnemyName": "追跡者",  
    "AIType": "Stalker",  
    "Health": 9999,  
    "AttackDamage": 40,  
    "MoveSpeed": 2.5,  
    "SightRange": 20,  
    "HearingRange": 30  
  }  
]

## **5. 次のステップ**

1. **プロトタイピング:** 本設計書に基づき、コアメカニクス（プレイヤー移動、インタラクション、ストーカーAI、正気度システム）のプロトタイプを制作する。  
2. **レベルデザイン:** ゲームの舞台となる主要エリアのホワイトボックス（基本的な形状のみで構成されたレベル）を作成し、探索ループと恐怖体験のテストを行う。  
3. **アセット制作:** プロトタイプで固まった仕様に基づき、キャラクターモデル、環境アセット、サウンドなどの制作を開始する。