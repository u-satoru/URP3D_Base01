# Phase 4.1: Templateアセットの移動と再設定 - 実施計画書

## 作成日時
2025年1月9日

## 概要
Phase 4.1では、Template層に属するアセット（シーン、プレハブ、ScriptableObject）を適切なTemplateフォルダに移動し、Missing Referenceを修正します。

## 移動対象アセット一覧

### 1. シーンファイル（.unity）
#### 現在の配置
- `Assets/_Project/Samples/`
  - AudioSystemDemo.unity → Common/Scenes/Demos/
  - BasicMovementDemo.unity → Common/Scenes/Demos/
  - CombatSystemDemo.unity → Common/Scenes/Demos/
  - EventSystemDemo.unity → Common/Scenes/Demos/
  - UISystemDemo.unity → Common/Scenes/Demos/

- `Assets/_Project/Scenes/`
  - Audio/StealthAudioTest.unity → Stealth/Scenes/Tests/
  - Levels/SampleScene.unity → Common/Scenes/Samples/
  - NPCVisualSensorTest.unity → Common/Scenes/Tests/
  - SampleScene.unity → Common/Scenes/Samples/
  - TestScene.unity → Common/Scenes/Tests/
  - VisualSensorTest.unity → Common/Scenes/Tests/
  - TPSTemplateTest.unity → TPS/Scenes/Tests/
  - TestAdventureProject.unity → Adventure/Scenes/Tests/
  - NewUnityProject.unity → Common/Scenes/Samples/

### 2. プレハブファイル（.prefab）
#### 現在の配置
- `Assets/_Project/Core/Prefabs/Templates/`
  - AudioManager.prefab → Common/Prefabs/Core/
  - CommandSystem.prefab → Common/Prefabs/Core/
  - DefaultCamera.prefab → Common/Prefabs/Core/
  - DefaultGround.prefab → Common/Prefabs/Environment/
  - DefaultLighting.prefab → Common/Prefabs/Environment/
  - DefaultPlayer.prefab → Common/Prefabs/Player/
  - GameManager.prefab → Common/Prefabs/Core/
  - SpawnPoint.prefab → Common/Prefabs/Gameplay/
  - UICanvas.prefab → Common/Prefabs/UI/

### 3. ScriptableObject（.asset）
#### ジャンルテンプレート設定
- `Assets/_Project/Core/Setup/GenreTemplates/`
  - GameGenre_Adventure.asset → Adventure/Configuration/
  - GameGenre_FPS.asset → FPS/Configuration/
  - GameGenre_Platformer.asset → Platformer/Configuration/
  - GameGenre_Stealth.asset → Stealth/Configuration/
  - GameGenre_TPS.asset → TPS/Configuration/
  - GameGenre_Strategy.asset → Strategy/Configuration/

#### AI検出設定
- `Assets/_Project/Core/Prefabs/Templates/`
  - DetectionConfig.asset → Common/Configuration/AI/

- `Assets/_Project/Features/Stealth/Configurations/`
  - DefaultDetectionConfig.asset → Stealth/Configuration/AI/

## フォルダ構造作成計画

### Template層の新規フォルダ構造
```
Assets/_Project/Features/Templates/
├── Common/            # 共通アセット
│   ├── Scenes/
│   │   ├── Demos/
│   │   ├── Samples/
│   │   └── Tests/
│   ├── Prefabs/
│   │   ├── Core/
│   │   ├── Environment/
│   │   ├── Player/
│   │   ├── Gameplay/
│   │   └── UI/
│   └── Configuration/
│       └── AI/
├── Stealth/           # ステルスゲーム
│   ├── Scenes/
│   │   └── Tests/
│   └── Configuration/
│       └── AI/
├── Platformer/        # プラットフォーマー（既存）
│   └── Configuration/
├── Adventure/         # アドベンチャー
│   ├── Scenes/
│   │   └── Tests/
│   └── Configuration/
├── FPS/              # 一人称シューティング
│   └── Configuration/
├── TPS/              # 三人称シューティング
│   ├── Scenes/
│   │   └── Tests/
│   └── Configuration/
└── Strategy/         # ストラテジー
    └── Configuration/
```

## 実施手順

### Step 1: フォルダ構造の作成
1. Template層に必要なジャンル別フォルダを作成
2. 各フォルダにScenes、Prefabs、Configurationサブフォルダを作成

### Step 2: アセットの移動
1. シーンファイルを適切なScenesフォルダに移動
2. プレハブファイルを適切なPrefabsフォルダに移動
3. ScriptableObjectを適切なConfigurationフォルダに移動

### Step 3: 参照の修正
1. 移動したアセットのmetaファイルGUID確認
2. シーン内のMissing Reference検出
3. プレハブ内のMissing Reference修正

### Step 4: 検証
1. 各シーンが正常にロードできることを確認
2. プレハブの参照が正しく解決されていることを確認
3. ScriptableObjectのデータが正しく読み込まれることを確認

## リスクと対策

### リスク1: Missing Reference発生
**対策**: 移動前にGUIDをメモし、移動後に手動で参照を修正

### リスク2: Assembly Definition参照エラー
**対策**: Template層のasmdefファイルが適切な依存関係を持っていることを確認

### リスク3: バージョン管理での競合
**対策**: 移動作業は一括で実施し、即座にコミット

## 成功基準
- 全シーンがエラーなくロード可能
- 全プレハブの参照が正しく解決
- ScriptableObjectが正しく機能
- コンパイルエラーゼロ
- Missing Reference警告ゼロ

## 進捗状況
- [ ] フォルダ構造作成
- [ ] シーンファイル移動
- [ ] プレハブファイル移動
- [ ] ScriptableObject移動
- [ ] 参照修正
- [ ] 検証完了

---
**ステータス**: 計画作成完了、実施準備中
