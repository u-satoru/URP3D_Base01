# Core層の機能拡張提案書

## 1. はじめに

本ドキュメントは、現在の3Dゲーム基盤テンプレートの`Core`層をさらに強化し、より多様な3Dゲームジャンルを網羅的にサポートするための機能拡張を提案するものである。

現在の`Core`層は、アクションゲームの基盤として非常に堅牢に設計されている。本提案は、その基盤の上に、さらなる汎用的な「仕組み」を追加することで、プロジェクトの最終目標である「究極のUnity 6ベース 3Dゲーム開発基盤テンプレート」の実現を加速させることを目的とする。

## 2. 現状のCore層の評価

現在の`Core`層は、「キャラクターを動かし、対話させ、戦闘させる」というアクション中心の機能に関する、以下の優れた基盤を提供している。

-   サービスロケーター
-   イベント駆動システム
-   コマンドパターン
-   入力管理
-   基本的な戦闘・体力システム
-   キャラクター制御
-   インタラクション
-   カメラ制御

しかし、より広範なゲーム体験の根幹となる、以下のような抽象的なシステムが不足している。

## 3. Core層に不足している、あるいは拡充が必要な要素

| 不足している要素 | 役割・目的 | これを追加することで恩恵を受ける主なジャンル |
| :--- | :--- | :--- |
| **① クエスト・目的管理システム** | クエストやミッションの受注、進行状況の追跡、目的（例：「〇〇を3つ集める」）の達成判定、報酬の管理といった一連の流れを扱う**汎用的な仕組み**。 | **アクションRPG**、**アドベンチャー**、オープンワールド、FPS/TPS（ミッションベースのもの） |
| **② 対話（ダイアログ）システム** | NPCとの会話における、選択肢の表示、会話の分岐、特定の条件（アイテム所持など）によるセリフの変化などを管理する**汎用的な仕組み**。 | **アクションRPG**、**アドベンチャー**、サバイバルホラー（物語の進行） |
| **③ 高度なインベントリ・アイテム管理** | アイテムの所持、スタック、合成、装備といった機能を管理する**汎用的な仕組み**。現在の`LimitedInventoryComponent`をさらに抽象化・拡張したもの。 | **アクションRPG**、**サバイバルホラー**、アドベンチャー |
| **④ スキル・アビリティシステム** | クールダウン、リソース消費（MPなど）、レベルアップによる効果の変化といった、キャラクターの特殊能力を管理するための**汎用的な仕組み**。 | **アクションRPG**、3Dプラットフォーマー（特殊アクション）、TPS/FPS（特殊スキル） |
| **⑤ ビークル（乗り物）制御基盤** | `CharacterController`とは異なる、車や飛行機などの乗り物の物理挙動や入力を扱うための**抽象的なインターフェースと基本実装**。 | レーシング、フライトシミュレーター、オープンワールド |
| **⑥ 勢力・関係性管理システム** | プレイヤー、NPC、敵対勢力といったグループ間の関係性（友好、中立、敵対など）を管理し、それによって振る舞いが変化する**仕組み**。 | **アクションRPG**、ストラテジー、ステルス（警戒レベルの管理に応用） |
| **⑦ 時間・天候システム** | ゲーム内世界の時間経過（昼夜サイクル）や天候の変化を管理し、それに応じたイベントを発行する**汎用的な仕組み**。 | **サバイバルホラー**（夜の恐怖演出）、オープンワールド、シミュレーション |

## 4. なぜこれらが「Core層」に必要なのか？

上記の要素はすべて、特定の見た目や具体的な数値（例：「火の玉の魔法」「AK-47」）ではなく、**ゲームのルールや骨格となる抽象的な「仕組み」**である。3層アーキテクチャの原則に基づき、これらの汎用システムを`Core`層に実装すべき理由は以下の通りである。

-   **関心の分離**:
    -   `Core`層が「クエストを管理する**仕組み**」を提供し、`Template`層が「『ゴブリンを10匹倒す』という具体的な**データ**」を`ScriptableObject`として定義する。
    -   `Core`層が「対話を分岐させる**仕組み**」を提供し、`Template`層が「村人の具体的な**セリフ**」をデータとして用意する。

-   **再利用性と拡張性の向上**:
    -   一度`Core`層に堅牢なクエストシステムを実装すれば、アクションRPGテンプレートでも、FPSのミッションモードでも、同じ仕組みを再利用できる。
    -   将来的に新しいジャンルのテンプレートを追加する際に、これらの基本的な仕組みがすでに`Core`層に存在することで、開発を大幅に加速できる。

## 5. 結論

現在の堅牢な`Core`層を基盤とし、本提案で示した汎用的なシステム群を新たに追加実装していくことで、このプロジェクトは真に「主要な3Dゲームジャンルを網羅する」究極のテンプレートへと進化することができる。

今後の開発ロードマップにおいて、これらの要素を優先的に検討することを推奨する。

