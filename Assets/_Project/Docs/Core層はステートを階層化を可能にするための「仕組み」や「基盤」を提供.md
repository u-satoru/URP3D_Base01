階層化ステートマシンをCore層で実装した方が良いですか？  

階層型ステートマシンの具体的な実装（どの状態がどの子状態を持つか、といったゲームロジック）をCore層に直接入れるのは、このプロジェクトの設
  計原則に反するため、推奨されません。


  しかし、階層化を可能にするための「仕組み」や「基盤」はCore層で提供すべきです。


  これは非常に重要なアーキテクチャの判断です。以下に理由と推奨される実装アプローチを説明します。

  ### アーキテクチャ上の理由


   1. Core層の役割:
   2. Features層の役割:
  この関心事の分離を徹底することで、Core層のステートマシン基盤は、プレイヤーだけでなく、AI、UI、さらにはゲーム全体の進行管理など、様々な場所で再
  利用できるようになります。


  推奨される実装アプローチ
  Step 1: Core層で「階層化の仕組み」を実装する
  Core層のステートマシン基盤を拡張し、あるステートが「サブステートマシン（子ステートマシン）」を持てるようにします。


   1. `HierarchicalState` 基底クラスの作成:
  Step 2: Features層で「具体的な階層構造」を実装する
  Core層で用意した HierarchicalState を使って、Features層でプレイヤーの具体的な状態を定義します。

  実装例（プレイヤーの場合）:


  `
  // 階層構造のイメージ
  - PlayerStateMachine (in Features/Player)
    - PlayerGroundedState (親状態)  <- CoreのHierarchicalStateを継承
      - IdleState (子状態)
      - WalkState (子状態)
      - RunState (子状態)
    - PlayerAirborneState (親状態) <- CoreのHierarchicalStateを継承
      - JumpState (子状態)
      - FallState (子状態)
  `


   1. 親ステートの実装:
   2. 子ステートの実装:
   * 再利用性の最大化: 階層化の仕組みはCoreにあるため、AIや他のキャラクターでも同じ仕組みを再利用できます。
  結論として、「階層化の機能」をCore層に、「具体的な階層構造と状態」をFeatures層に実装するのが、このプロジェクトのアーキテクチャに最も合致した最
  適なアプローチです。


現在のCore層にあるステートマシンの基盤（IStateやStateMachineなど）は、そのままで非常に良い設計であり、変更する必要はありませ
  ん。


  ただし、より正確に言うと、「現在の基盤はそのままに、階層化をサポートするための新しい部品（`HierarchicalState`のようなクラス）をCore層に追加する
  のがベスト」ということです。

  要点をまとめると以下のようになります。


   1. 現状の基盤は正しい:
   2. なぜ拡張を推奨するのか:
  結論:
  現在のCore層のステートマシンはそのままで良いです。そして、将来の拡張性を考慮して、階層化をサポートする新しい基底クラスを追加することを推奨しま
  す。既存のものを壊す必要はありません。
  
