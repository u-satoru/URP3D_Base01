# Unity URP 3D Base Template - åŒ…æ‹¬çš„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

**ä½œæˆæ—¥**: 2025å¹´9æœˆ11æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: Phase 1 - åå‰ç©ºé–“çµ±ä¸€å®Œäº†ç‰ˆ  
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: Unity 6 URP 3D Base Template

## æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Unity 6ã§æ§‹ç¯‰ã•ã‚ŒãŸ3Dã‚²ãƒ¼ãƒ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®åŒ…æ‹¬çš„ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è§£èª¬ã§ã™ã€‚ç¾åœ¨ã®å®Ÿè£…ã‚’æ­£è§£ã¨ã—ã¦ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­è¨ˆåŸå‰‡ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼ã‚’è©³ç´°ã«è¨˜è¿°ã—ã¾ã™ã€‚

## ç›®æ¬¡

1. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦)
2. [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢](#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢)
3. [æ ¸å¿ƒãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³](#æ ¸å¿ƒãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³)
4. [ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
5. [ã‚µãƒ¼ãƒ“ã‚¹ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³](#ã‚µãƒ¼ãƒ“ã‚¹ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³)
6. [ã‚³ãƒãƒ³ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³](#ã‚³ãƒãƒ³ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³)
7. [ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ã¨ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«](#ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ã¨ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«)
8. [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼](#ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼)
9. [ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
10. [ç§»è¡Œãƒ‘ã‚¿ãƒ¼ãƒ³ã¨å¾Œæ–¹äº’æ›æ€§](#ç§»è¡Œãƒ‘ã‚¿ãƒ¼ãƒ³ã¨å¾Œæ–¹äº’æ›æ€§)
11. [åå‰ç©ºé–“è¦ç´„](#åå‰ç©ºé–“è¦ç´„)
12. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³)

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### åŸºæœ¬å“²å­¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ **ç–çµåˆãƒ»é«˜å‡é›†** ã®åŸå‰‡ã«åŸºã¥ãã€ä»¥ä¸‹ã®3ã¤ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ãƒ©ãƒ€ã‚¤ãƒ ã‚’çµ„ã¿åˆã‚ã›ã¦ã„ã¾ã™ï¼š

1. **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ (Event-Driven Architecture)**
2. **ã‚µãƒ¼ãƒ“ã‚¹ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ (Service Locator Pattern)**
3. **ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ (Layered Architecture)**

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®æŸ±

```mermaid
block-beta
    columns 3
    
    block:core["Core Layer"]
        columns 1
        ServiceLocator["â€¢ ServiceLocator"]
        Events["â€¢ Events"]
        Commands["â€¢ Commands"]  
        Audio["â€¢ Audio"]
        Data["â€¢ Data"]
        Helpers["â€¢ Helpers"]
    end
    
    block:features["Features Layer"]
        columns 1
        Player["â€¢ Player"]
        AI["â€¢ AI"]
        UI["â€¢ UI"]
        Camera["â€¢ Camera"]
    end
    
    block:tests["Tests Layer"]  
        columns 1
        UnitTests["â€¢ Unit Tests"]
        IntegrationTests["â€¢ Integration Tests"]
        PerformanceTests["â€¢ Performance Tests"]
    end
    
    Core --> Features
    Core --> Tests
    Features --> Tests
```

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢

### ç‰©ç†çš„æ§‹é€ 

```mermaid
flowchart TD
    Project["Assets/_Project/"]
    
    Project --> Core["Core/<br/><small>æ ¸å¿ƒã‚·ã‚¹ãƒ†ãƒ ï¼ˆå…±é€šåŸºç›¤ï¼‰</small>"]
    Project --> Features["Features/<br/><small>æ©Ÿèƒ½å®Ÿè£…ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰ï¼‰</small>"]
    Project --> Tests["Tests/<br/><small>ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰</small>"]
    Project --> Docs["Docs/<br/><small>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</small>"]
    
    Core --> CoreAudio["Audio/<br/><small>ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚·ã‚¹ãƒ†ãƒ </small>"]
    Core --> CoreCommands["Commands/<br/><small>ã‚³ãƒãƒ³ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³å®Ÿè£…</small>"]
    Core --> CoreEvents["Events/<br/><small>ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ </small>"]
    Core --> CoreServices["Services/<br/><small>ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…</small>"]
    Core --> CoreHelpers["Helpers/<br/><small>ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹</small>"]
    Core --> CoreLifecycle["Lifecycle/<br/><small>ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†</small>"]
    Core --> ServiceLocatorFile["ServiceLocator.cs"]
    Core --> FeatureFlagsFile["FeatureFlags.cs"]
    Core --> GameManagerFile["GameManager.cs"]
    Core --> SystemInitializerFile["SystemInitializer.cs"]
    
    Features --> FeaturesPlayer["Player/<br/><small>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ©Ÿèƒ½</small>"]
    Features --> FeaturesAI["AI/<br/><small>AIæ©Ÿèƒ½</small>"]
    Features --> FeaturesUI["UI/<br/><small>UIæ©Ÿèƒ½</small>"]
    Features --> FeaturesCamera["Camera/<br/><small>ã‚«ãƒ¡ãƒ©æ©Ÿèƒ½</small>"]
    
    Tests --> TestsCore["Core/<br/><small>Coreãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒ†ã‚¹ãƒˆ</small>"]
    Tests --> TestsFeatures["Features/<br/><small>Featuresãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒ†ã‚¹ãƒˆ</small>"]
    Tests --> TestsIntegration["Integration/<br/><small>çµåˆãƒ†ã‚¹ãƒˆ</small>"]
    Tests --> TestsPerformance["Performance/<br/><small>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</small>"]
    
    Docs --> ArchPolicies["Architecture_Policies.md"]
    Docs --> Works["Works/<br/><small>ä½œæ¥­ãƒ­ã‚°ä¿ç®¡åº«</small>"]
    
    style Core fill:#e1f5fe
    style Features fill:#f3e5f5
    style Tests fill:#e8f5e8
    style Docs fill:#fff3e0
```

### ä¾å­˜é–¢ä¿‚åˆ¶ç´„

```mermaid
graph TB
    subgraph "ãƒ¬ã‚¤ãƒ¤ãƒ¼ä¾å­˜é–¢ä¿‚"
        Features["Features Layer"]
        Core["Core Layer"]
        Tests["Tests Layer"]
    end
    
    Features -->|"âœ… ä¾å­˜è¨±å¯"| Core
    Core -.->|"âŒ ä¾å­˜ç¦æ­¢"| Features
    Tests -->|"âœ… OK"| Core
    Tests -->|"âœ… OK"| Features
    
    style Core fill:#e1f5fe
    style Features fill:#f3e5f5
    style Tests fill:#e8f5e8
```

**é‡è¦**: Coreå±¤ã‹ã‚‰Featureså±¤ã¸ã®ä¾å­˜ã¯ **å³æ ¼ã«ç¦æ­¢** ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

## æ ¸å¿ƒãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³

### 1. Service Locator Pattern

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Core/ServiceLocator.cs:11`

```csharp
public static class ServiceLocator
{
    private static readonly Dictionary<Type, object> services = new Dictionary<Type, object>();
    private static readonly Dictionary<Type, Func<object>> factories = new Dictionary<Type, Func<object>>();
    private static readonly object lockObject = new object();
    
    public static void RegisterService<T>(T service) where T : class { /* ... */ }
    public static T GetService<T>() where T : class { /* ... */ }
    public static T RequireService<T>() where T : class { /* ... */ }
}
```

**ç‰¹å¾´**:
- **ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•**: `lockObject`ã«ã‚ˆã‚‹åŒæœŸåˆ¶å¾¡
- **ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ã‚µãƒãƒ¼ãƒˆ**: é…å»¶åˆæœŸåŒ–å¯¾å¿œ
- **å‹å®‰å…¨**: ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã«ã‚ˆã‚‹å‹ãƒã‚§ãƒƒã‚¯

### 2. Event-Driven Architecture

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Core/Events/GameEvent.cs:13`

```csharp
[CreateAssetMenu(fileName = "New Game Event", menuName = "asterivo.Unity60/Events/Game Event")]
public class GameEvent : ScriptableObject
{
    private readonly HashSet<GameEventListener> listeners = new HashSet<GameEventListener>();
    private List<GameEventListener> sortedListeners;
    private bool isDirty = true;
    
    public void Raise() { /* å„ªå…ˆåº¦é †å®Ÿè¡Œ */ }
    public System.Collections.IEnumerator RaiseAsync() { /* éåŒæœŸå®Ÿè¡Œ */ }
}
```

**ç‰¹å¾´**:
- **ScriptableObjectãƒ™ãƒ¼ã‚¹**: ã‚¢ã‚»ãƒƒãƒˆã¨ã—ã¦ã‚¤ãƒ™ãƒ³ãƒˆå®šç¾©ã‚’ç®¡ç†
- **å„ªå…ˆåº¦ä»˜ããƒªã‚¹ãƒŠãƒ¼**: `Priority`ã«ã‚ˆã‚‹å®Ÿè¡Œé †åˆ¶å¾¡
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**: `HashSet`ã«ã‚ˆã‚‹é«˜é€Ÿç®¡ç†
- **éåŒæœŸã‚µãƒãƒ¼ãƒˆ**: ãƒ•ãƒ¬ãƒ¼ãƒ åˆ†æ•£å®Ÿè¡Œ

### 3. Command Pattern

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Core/Commands/ICommand.cs:6`

```csharp
public interface ICommand
{
    void Execute();
    void Undo();
    bool CanUndo { get; }
}
```

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Core/Commands/CommandInvoker.cs:15`

```csharp
public class CommandInvoker : MonoBehaviour, IGameEventListener<ICommand>
{
    private Stack<ICommand> undoStack = new Stack<ICommand>();
    private Stack<ICommand> redoStack = new Stack<ICommand>();
    
    public void ExecuteCommand(ICommand command) { /* å®Ÿè¡Œãƒ»å±¥æ­´ç®¡ç† */ }
    public bool Undo() { /* å…ƒã«æˆ»ã™ */ }
    public bool Redo() { /* ã‚„ã‚Šç›´ã— */ }
}
```

**ç‰¹å¾´**:
- **Undo/Redoå¯¾å¿œ**: ã‚¹ã‚¿ãƒƒã‚¯æ§‹é€ ã«ã‚ˆã‚‹å±¥æ­´ç®¡ç†
- **ã‚¤ãƒ™ãƒ³ãƒˆçµ±åˆ**: `IGameEventListener<ICommand>`å®Ÿè£…
- **å±¥æ­´ã‚µã‚¤ã‚ºåˆ¶é™**: ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡åˆ¶å¾¡

---

## ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼å›³

```mermaid
flowchart TD
    UserInput["User Input"]
    PlayerController["PlayerController"]
    CommandDefEvent["CommandDefinitionGameEvent"]
    GameManager["GameManager"]
    EventListener["IGameEventListener&lt;ICommandDefinition&gt;"]
    CommandInvoker["CommandInvoker"]
    CommandCreation["ICommand Creation"]
    CommandExecute["Command.Execute()"]
    GameStateChanges["Game State Changes"]
    GameStateEvent["GameStateEvent"]
    UIUpdates["UI Updates"]
    AudioEvents["Audio Events"]
    VisualEffects["Visual Effects"]
    
    UserInput --> PlayerController
    PlayerController --> CommandDefEvent
    CommandDefEvent --> EventListener
    EventListener --> GameManager
    GameManager --> CommandCreation
    CommandCreation --> CommandInvoker
    CommandCreation --> CommandExecute
    CommandExecute --> GameStateChanges
    GameStateChanges --> GameStateEvent
    GameStateEvent --> UIUpdates
    GameStateChanges --> AudioEvents
    GameStateChanges --> VisualEffects
    
    style UserInput fill:#ffecb3
    style CommandDefEvent fill:#c8e6c9
    style GameStateEvent fill:#c8e6c9
    style CommandExecute fill:#ffcdd2
```

### ã‚¤ãƒ™ãƒ³ãƒˆã®ç¨®é¡

1. **åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆ (`GameEvent`)**
   - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã—
   - çŠ¶æ…‹å¤‰åŒ–é€šçŸ¥ç”¨

2. **å‹ä»˜ãã‚¤ãƒ™ãƒ³ãƒˆ (`GenericGameEvent<T>`)**
   - å‹å®‰å…¨ãªãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—
   - `CommandDefinitionGameEvent`, `GameStateEvent`ç­‰

3. **ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ£ãƒãƒ« (`EventChannelSO`)**
   - ScriptableObjectãƒ™ãƒ¼ã‚¹ã®é€šä¿¡ãƒãƒ£ãƒãƒ«
   - ã‚¨ãƒ‡ã‚£ã‚¿ã§ã®è¦–è¦šçš„ç®¡ç†

### ã‚¤ãƒ™ãƒ³ãƒˆå®Ÿè¡Œãƒ•ãƒ­ãƒ¼

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Core/Events/GameEvent.cs:35`

```csharp
public void Raise()
{
    // å„ªå…ˆåº¦ã§ã‚½ãƒ¼ãƒˆï¼ˆå¿…è¦æ™‚ã®ã¿ï¼‰
    if (isDirty) { RebuildSortedList(); }
    
    // é€†é †ã§å®Ÿè¡Œï¼ˆãƒªã‚¹ãƒŠãƒ¼ãŒè‡ªèº«ã‚’å‰Šé™¤ã—ã¦ã‚‚å®‰å…¨ï¼‰
    for (int i = sortedListeners.Count - 1; i >= 0; i--)
    {
        if (sortedListeners[i] != null && sortedListeners[i].enabled)
        {
            sortedListeners[i].OnEventRaised();
        }
    }
}
```

---

## ã‚µãƒ¼ãƒ“ã‚¹ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³

### ã‚µãƒ¼ãƒ“ã‚¹ç™»éŒ²ãƒ•ãƒ­ãƒ¼

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Core/Audio/Services/AudioService.cs:74`

```csharp
private void Awake()
{
    // ServiceLocatorã«ç™»éŒ²
    if (FeatureFlags.UseServiceLocator)
    {
        ServiceLocator.RegisterService<IAudioService>(this);
        
        if (FeatureFlags.EnableDebugLogging)
        {
            EventLogger.Log("[AudioService] Registered to ServiceLocator");
        }
    }
}
```

### ã‚µãƒ¼ãƒ“ã‚¹å–å¾—ãƒ‘ã‚¿ãƒ¼ãƒ³

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Core/Helpers/ServiceHelper.cs:12`

```csharp
public static T GetServiceWithFallback<T>() where T : class
{
    // ServiceLocatorä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰
    if (CoreFeatureFlags.UseServiceLocator)
    {
        var service = ServiceLocator.GetService<T>();
        if (service != null) 
        {
            LogServiceAcquisition<T>("ServiceLocator");
            return service;
        }
    }
    
    // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: Unityæ¨™æº–æ¤œç´¢ï¼ˆé–‹ç™ºãƒ“ãƒ«ãƒ‰/ã‚¨ãƒ‡ã‚£ã‚¿é™å®šï¼‰
    #if UNITY_EDITOR || DEVELOPMENT_BUILD
    if (typeof(T).IsSubclassOf(typeof(UnityEngine.Object)))
    {
        var unityObject = UnityEngine.Object.FindFirstObjectByType(typeof(T)) as T;
        if (unityObject != null)
        {
            LogServiceAcquisition<T>("FindFirstObjectByType");
        }
        return unityObject;
    }
    #endif

    LogServiceNotFound<T>();
    return null;
}
```

### ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§

| ã‚µãƒ¼ãƒ“ã‚¹ | ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ | å®Ÿè£…ã‚¯ãƒ©ã‚¹ | è²¬ä»» |
|---------|-----------------|-----------|------|
| Audio | `IAudioService` | `AudioService` | éŸ³éŸ¿åˆ¶å¾¡ |
| Game State | `IGameStateManager` | `GameStateManagerService` | çŠ¶æ…‹ç®¡ç† |
| Scene Loading | `ISceneLoadingService` | `SceneLoadingService` | ã‚·ãƒ¼ãƒ³é·ç§» |
| Score | `IScoreService` | `ScoreService` | ã‚¹ã‚³ã‚¢ç®¡ç† |
| Pause | `IPauseService` | `PauseService` | ãƒãƒ¼ã‚ºåˆ¶å¾¡ |

---

## ã‚³ãƒãƒ³ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³

### ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TD
    PlayerInput["Player Input"]
    OnMove["PlayerController.OnMove()"]
    MoveCommandDef["MoveCommandDefinition"]
    EventRaise["CommandDefinitionGameEvent.Raise()"]
    OnEventRaised["GameManager.OnEventRaised()"]
    CreateCommand["CreateCommandFromDefinition()"]
    Execute["ICommand.Execute()"]
    GameLogic["Game Logic Execution"]
    InvokerExecute["CommandInvoker.ExecuteCommand()"]
    UndoStack["Undo Stack Push"]
    
    PlayerInput --> OnMove
    OnMove --> MoveCommandDef
    MoveCommandDef --> EventRaise
    EventRaise --> OnEventRaised
    OnEventRaised --> CreateCommand
    CreateCommand --> Execute
    Execute --> GameLogic
    GameLogic --> InvokerExecute
    InvokerExecute --> UndoStack
    
    style PlayerInput fill:#ffecb3
    style MoveCommandDef fill:#e1f5fe
    style Execute fill:#ffcdd2
    style UndoStack fill:#f3e5f5
```

### ã‚³ãƒãƒ³ãƒ‰ç¨®é¡

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Features/Player/Scripts/PlayerController.cs:120`

```csharp
// ç§»å‹•ã‚³ãƒãƒ³ãƒ‰
var definition = new MoveCommandDefinition(MoveCommandDefinition.MoveType.Walk, new Vector3(moveInput.x, 0, moveInput.y));
onCommandDefinitionIssued?.Raise(definition);

// ã‚¸ãƒ£ãƒ³ãƒ—ã‚³ãƒãƒ³ãƒ‰  
var definition = new JumpCommandDefinition();
onCommandDefinitionIssued?.Raise(definition);
```

### Undo/Redoæ©Ÿèƒ½

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Core/Commands/CommandInvoker.cs:80`

```csharp
public bool Undo()
{
    if (!CanUndo) return false;
        
    var command = undoStack.Pop();
    command.Undo();

    if (command.CanUndo && enableRedo)
    {
        redoStack.Push(command);
    }
    
    BroadcastHistoryChanges();
    return true;
}
```

---

## ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ã¨ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«

### åˆæœŸåŒ–å„ªå…ˆåº¦ã‚·ã‚¹ãƒ†ãƒ 

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Core/IInitializable.cs:6`

```csharp
public interface IInitializable
{
    int Priority { get; }        // ä½ã„å€¤ã»ã©å…ˆã«åˆæœŸåŒ–
    void Initialize();
    bool IsInitialized { get; }
}
```

### SystemInitializer ã«ã‚ˆã‚‹çµ±åˆç®¡ç†

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Core/SystemInitializer.cs:52`

```csharp
private void DiscoverSystems()
{
    // å­ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰åˆæœŸåŒ–å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ¢ç´¢
    var components = GetComponentsInChildren<MonoBehaviour>(true);
    
    foreach (var component in components)
    {
        if (component is IInitializable initializable)
        {
            initializableSystems.Add(initializable);
            systemComponents.Add(component);
        }
    }
    
    // å„ªå…ˆåº¦ã§ã‚½ãƒ¼ãƒˆ
    initializableSystems = initializableSystems.OrderBy(s => s.Priority).ToList();
}
```

### ã‚µãƒ¼ãƒ“ã‚¹ç™»éŒ²ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Core/Lifecycle/IServiceLocatorRegistrable.cs:5`

```csharp
public interface IServiceLocatorRegistrable
{
    int Priority { get; }
    void RegisterServices();
    void UnregisterServices();
}
```

### åˆæœŸåŒ–é †åºä¾‹

```mermaid
flowchart TD
    Start["System Initialization Start"]
    P0["Priority 0<br/>CoreFeatureFlags"]
    P5["Priority 5<br/>AudioManager (IAudioService)"]
    P10["Priority 10<br/>AudioService (IAudioService backup)"]
    P15["Priority 15<br/>GameStateManagerService"]
    P20["Priority 20<br/>SceneLoadingService"]
    P25["Priority 25<br/>UIService"]
    PN["Priority N<br/>Feature-specific services"]
    Complete["All Systems Initialized"]
    
    Start --> P0
    P0 --> P5
    P5 --> P10
    P10 --> P15
    P15 --> P20
    P20 --> P25
    P25 --> PN
    PN --> Complete
    
    style Start fill:#e8f5e8
    style P0 fill:#ffecb3
    style P5 fill:#e1f5fe
    style Complete fill:#c8e6c9
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼

### ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TD
    UserInput["User Input"]
    InputSystem["InputSystem"]
    PlayerController["PlayerController"]
    CommandDef["Command Definition"]
    CommandEvent["CommandDefinitionGameEvent"]
    GameManager["GameManager"]
    CommandCreation["Command Creation"]
    CommandInvoker["CommandInvoker"]
    CommandExecute["Command.Execute()"]
    StateChange["Game State Change"]
    ServiceNotifications["Service Notifications"]
    
    subgraph Updates["System Updates"]
        UIUpdates["UI Updates"]
        AudioUpdates["Audio Updates"] 
        VisualUpdates["Visual Updates"]
    end
    
    UserInput --> InputSystem
    InputSystem --> PlayerController
    PlayerController --> CommandDef
    CommandDef --> CommandEvent
    CommandEvent --> GameManager
    GameManager --> CommandCreation
    CommandCreation --> CommandInvoker
    CommandInvoker --> CommandExecute
    CommandExecute --> StateChange
    StateChange --> ServiceNotifications
    ServiceNotifications --> UIUpdates
    ServiceNotifications --> AudioUpdates
    ServiceNotifications --> VisualUpdates
    
    style UserInput fill:#ffecb3
    style StateChange fill:#ffcdd2
    style Updates fill:#e8f5e8
```

### éŸ³éŸ¿ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TD
    GameStateChange["Game State Change"]
    GameStateEvent["GameStateEvent"]
    AudioServiceUpdate["AudioService.UpdateGameState()"]
    
    subgraph AudioManagers["Audio Category Managers"]
        BGMManager["BGMManager"]
        AmbientManager["AmbientManager"]
        EffectManager["EffectManager"]
    end
    
    StealthIntegration["Stealth Integration"]
    StealthCoordinator["StealthAudioCoordinator"]
    SpatialAudio["SpatialAudio"]
    NPCAudioDetection["NPCs Audio Detection"]
    
    GameStateChange --> GameStateEvent
    GameStateEvent --> AudioServiceUpdate
    AudioServiceUpdate --> BGMManager
    AudioServiceUpdate --> AmbientManager
    AudioServiceUpdate --> EffectManager
    AudioServiceUpdate --> StealthIntegration
    StealthIntegration --> StealthCoordinator
    StealthCoordinator --> SpatialAudio
    SpatialAudio --> NPCAudioDetection
    
    style GameStateChange fill:#ffcdd2
    style AudioManagers fill:#e1f5fe
    style StealthCoordinator fill:#f3e5f5
    style NPCAudioDetection fill:#c8e6c9
```

### ã‚¤ãƒ™ãƒ³ãƒˆä¼æ’­ãƒ‘ã‚¿ãƒ¼ãƒ³

1. **åŒæœŸã‚¤ãƒ™ãƒ³ãƒˆ**: å³åº§ã«å…¨ãƒªã‚¹ãƒŠãƒ¼ã«é€šçŸ¥
2. **éåŒæœŸã‚¤ãƒ™ãƒ³ãƒˆ**: ãƒ•ãƒ¬ãƒ¼ãƒ åˆ†æ•£ã«ã‚ˆã‚‹è² è·è»½æ¸›
3. **å„ªå…ˆåº¦ä»˜ãã‚¤ãƒ™ãƒ³ãƒˆ**: é‡è¦åº¦é †ã§ã®å®Ÿè¡Œåˆ¶å¾¡

---

## ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### éšå±¤æ§‹é€ 

```mermaid
block-beta
    columns 3
    
    block:top["AudioManager (Top Level)"]
        columns 1
        TopLevel["implements IAudioService"]
    end
    
    block:category["Audio Category Managers"]
        columns 3
        BGMManager["BGMManager<br/>(Background)"]
        AmbientManager["AmbientManager<br/>(Environment)"]
        EffectManager["EffectManager<br/>(Sound Effects)"]
    end
    
    block:specialized["Specialized Audio Systems"]
        columns 3
        SpatialAudioMgr["SpatialAudioMgr<br/>(3D Positioning)"]
        DynamicAudioEnv["DynamicAudioEnv<br/>(Adaptive Audio)"]
        StealthAudioCoord["StealthAudioCoord<br/>(Stealth Detection)"]
    end
    
    top --> category
    category --> specialized
```

### Singleton â†’ Service Locatorç§»è¡Œ

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Core/Audio/AudioManager.cs:18`

```csharp
[System.Obsolete("Use ServiceLocator.GetService<IAudioService>() instead")]
public static AudioManager Instance 
{
    get 
    {
        // Legacy Singletonå®Œå…¨ç„¡åŠ¹åŒ–ãƒ•ãƒ©ã‚°ã®ç¢ºèª
        if (FeatureFlags.DisableLegacySingletons) 
        {
            EventLogger.LogError("[DEPRECATED] AudioManager.Instance is disabled. Use ServiceLocator.GetService<IAudioService>() instead");
            return null;
        }
        
        // ç§»è¡Œè­¦å‘Šã®è¡¨ç¤º
        if (FeatureFlags.EnableMigrationWarnings) 
        {
            EventLogger.LogWarning("[DEPRECATED] AudioManager.Instance usage detected. Please migrate to ServiceLocator.GetService<IAudioService>()");
        }
        
        return instance;
    }
}
```

### ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TD
    GameEvent["Game Event"]
    AudioService["AudioService"]
    CategoryManager["Audio Category Manager"]
    VolumeControl["Volume Control"]
    AudioMixer["AudioMixer"]
    UnityEngine["Unity Audio Engine"]
    StealthDetection["Stealth Detection"]
    NPCAudioSensor["NPCAudioSensor"]
    AIBehavior["AI Behavior"]
    
    GameEvent --> AudioService
    AudioService --> CategoryManager
    AudioService --> VolumeControl
    CategoryManager --> AudioMixer
    VolumeControl --> AudioMixer
    AudioMixer --> UnityEngine
    AudioMixer --> StealthDetection
    StealthDetection --> NPCAudioSensor
    NPCAudioSensor --> AIBehavior
    
    style GameEvent fill:#c8e6c9
    style AudioService fill:#e1f5fe
    style AudioMixer fill:#ffecb3
    style AIBehavior fill:#f3e5f5
```

---

## ç§»è¡Œãƒ‘ã‚¿ãƒ¼ãƒ³ã¨å¾Œæ–¹äº’æ›æ€§

### æ®µéšçš„ç§»è¡Œæˆ¦ç•¥

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Features/Player/Scripts/PlayerController.cs:62`

```csharp
private void InitializeAudioServices()
{
    // æ–°ã—ã„æ–¹æ³•ã§ã®å–å¾— (æ¨å¥¨) - ServiceLocatorå„ªå…ˆ
    if (useServiceLocator && FeatureFlags.UseServiceLocator) 
    {
        try
        {
            audioService = ServiceLocator.GetService<IAudioService>();
            if (audioService != null)
            {
                audioServiceStatus = "ServiceLocator: Success";
                return; // æ­£å¸¸ã«å–å¾—ã§ããŸã®ã§çµ‚äº†
            }
        }
        catch (System.Exception ex)
        {
            EventLogger.LogWarning($"ServiceLocator audio service failed: {ex.Message}");
        }
    }
    
    // å¾“æ¥ã®æ–¹æ³• (å¾Œæ–¹äº’æ›æ€§) - Singleton ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    if (!FeatureFlags.DisableLegacySingletons)
    {
        try 
        {
#pragma warning disable CS0618 // Obsolete warning suppression during migration
            var audioManager = FindFirstObjectByType<asterivo.Unity60.Core.Audio.AudioManager>();
            if (audioManager != null)
            {
                audioService = audioManager;
                audioServiceStatus = "Legacy Singleton: Success";
            }
#pragma warning restore CS0618
        }
        catch (System.Exception ex)
        {
            EventLogger.LogError($"Legacy audio service fallback failed: {ex.Message}");
        }
    }
}
```

### ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°ã«ã‚ˆã‚‹åˆ¶å¾¡

**å®Ÿè£…å ´æ‰€**: `Assets/_Project/Core/FeatureFlags.cs`

```csharp
public static class FeatureFlags
{
    public static bool UseServiceLocator { get => PlayerPrefs.GetInt("FeatureFlag_UseServiceLocator", 1) == 1; set => SetFlag("FeatureFlag_UseServiceLocator", value); }
    public static bool EnableMigrationWarnings { get => PlayerPrefs.GetInt("FeatureFlag_EnableMigrationWarnings", 1) == 1; set => SetFlag("FeatureFlag_EnableMigrationWarnings", value); }
    public static bool DisableLegacySingletons { get => PlayerPrefs.GetInt("FeatureFlag_DisableLegacySingletons", 0) == 1; set => SetFlag("FeatureFlag_DisableLegacySingletons", value); }
}
```

### ç§»è¡Œæ®µéš

1. **Phase 1**: åå‰ç©ºé–“çµ±ä¸€ âœ… å®Œäº†
2. **Phase 2**: Service Locatorå®Ÿè£…ãƒ»Singletonä½µå­˜
3. **Phase 3**: Singletonæ®µéšçš„å»ƒæ­¢
4. **Phase 4**: å®Œå…¨Service Locatorç§»è¡Œ

---

## åå‰ç©ºé–“è¦ç´„

### çµ±ä¸€ãƒ‘ã‚¿ãƒ¼ãƒ³

```csharp
// Root namespace
namespace asterivo.Unity60

// Core layer - ã‚·ã‚¹ãƒ†ãƒ åŸºç›¤
namespace asterivo.Unity60.Core
namespace asterivo.Unity60.Core.Audio
namespace asterivo.Unity60.Core.Events
namespace asterivo.Unity60.Core.Commands
namespace asterivo.Unity60.Core.Services

// Features layer - ãƒ‰ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½
namespace asterivo.Unity60.Features.Player
namespace asterivo.Unity60.Features.AI
namespace asterivo.Unity60.Features.UI

// Tests layer - ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
namespace asterivo.Unity60.Tests.Core
namespace asterivo.Unity60.Tests.Features
namespace asterivo.Unity60.Tests.Integration
```

### ç§»è¡ŒçŠ¶æ³

- âœ… **å®Œäº†**: Coreå±¤ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã®åå‰ç©ºé–“çµ±ä¸€
- âœ… **å®Œäº†**: Featureså±¤ã®åå‰ç©ºé–“çµ±ä¸€  
- âœ… **å®Œäº†**: Testså±¤ã®åå‰ç©ºé–“çµ±ä¸€
- âœ… **å®Œäº†**: AIæ©Ÿèƒ½ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã®é…ç½®ä¿®æ­£

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

### ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“å›³

```mermaid
block-beta
    columns 1
    
    UnityGame["Unity URP 3D Game"]
    
    GameManager["GameManager<br/>(Central Orchestrator)"]
    
    block:core["Core Systems"]
        columns 3
        
        block:servicelocator["ServiceLocator<br/>(DI Container)"]
            columns 1
            Services["Services"]
            AudioService["â€¢ IAudioService"]
            GameStateMan["â€¢ IGameStateManager"]
            SceneLoading["â€¢ ISceneLoading"]
            ScoreService["â€¢ IScoreService"]
            PauseService["â€¢ IPauseService"]
        end
        
        block:eventsystem["EventSystem<br/>(Event Bus)"]
            columns 1
            EventTypes["Event Types"]
            GameEvent["â€¢ GameEvent"]
            GameStateEvent["â€¢ GameStateEvent"]
            CommandDefEvent["â€¢ CommandDefinitionEvent"]
            PlayerDataEvent["â€¢ PlayerDataEvent"]
            FloatGameEvent["â€¢ FloatGameEvent"]
            StringGameEvent["â€¢ StringGameEvent"]
        end
        
        block:commandinvoker["CommandInvoker<br/>(Action Queue)"]
            columns 1
            Commands["Commands"]
            MoveCommand["â€¢ MoveCommand"]
            JumpCommand["â€¢ JumpCommand"]
            DamageCommand["â€¢ DamageCommand"]
            HealCommand["â€¢ HealCommand"]
        end
    end
    
    UnityGame --> GameManager
    GameManager --> core
```

### ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ãƒ•ãƒ­ãƒ¼è©³ç´°å›³

```mermaid
flowchart TD
    PlayerInput["Player Input"]
    InputSystem["InputSystem"]
    PlayerController["PlayerController"]
    CommandDefinition["CommandDefinition"]
    CommandDefGameEvent["CommandDefinitionGameEvent"]
    EventBus["Event Bus"]
    GameManager["GameManager"]
    OtherListeners["Other Listeners"]
    CreateCommand["CreateCommandFromDefinition"]
    ICommandExecute["ICommand.Execute"]
    
    subgraph Execution["Parallel Execution"]
        GameLogic["Game Logic<br/>Updates"]
        CommandInvoker["CommandInvoker<br/>History Stack"]
    end
    
    StateChanges["State Changes"]
    UndoRedo["Undo/Redo"]
    
    subgraph SystemUpdates["System Updates"]
        AudioEvents["Audio<br/>Events"]
        VisualEffects["Visual<br/>Effects"]
        UIUpdates["UI<br/>Updates"]
    end
    
    PlayerInput --> InputSystem
    InputSystem --> PlayerController
    PlayerController --> CommandDefinition
    CommandDefinition --> CommandDefGameEvent
    CommandDefGameEvent --> EventBus
    EventBus --> GameManager
    EventBus --> OtherListeners
    GameManager --> CreateCommand
    CreateCommand --> ICommandExecute
    ICommandExecute --> GameLogic
    ICommandExecute --> CommandInvoker
    GameLogic --> StateChanges
    CommandInvoker --> UndoRedo
    StateChanges --> AudioEvents
    StateChanges --> VisualEffects
    StateChanges --> UIUpdates
    
    style PlayerInput fill:#ffecb3
    style EventBus fill:#c8e6c9
    style ICommandExecute fill:#ffcdd2
    style SystemUpdates fill:#e8f5e8
```

### ã‚µãƒ¼ãƒ“ã‚¹ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼è©³ç´°å›³

```mermaid
block-beta
    columns 1
    
    ServiceLocator["ServiceLocator<br/>(Static Class - Thread Safe)"]
    
    ServiceDict["Dictionary&lt;Type, object&gt;<br/>services"]
    
    block:services["Registered Services"]
        columns 3
        
        block:audio["AudioService"]
            columns 1
            AudioInterface["implements<br/>IAudioService"]
            BGMManager["BGMManager"]
            AmbientManager["AmbientManager"]
            EffectManager["EffectManager"]
        end
        
        block:gamestate["GameStateMgr"]
            columns 1
            GameStateInterface["implements<br/>IGameStateMgr"]
            StateEvents["State Events"]
            Transitions["Transitions"]
        end
        
        block:sceneloading["SceneLoading"]
            columns 1
            SceneInterface["implements<br/>ISceneLoading"]
            SceneManagement["Scene Loading<br/>Management"]
        end
    end
    
    ServiceLocator --> ServiceDict
    ServiceDict --> services
```

### ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚·ã‚¹ãƒ†ãƒ è©³ç´°å›³

```mermaid
block-beta
    columns 1
    
    AudioManager["AudioManager<br/>implements IAudioService"]
    
    CategoryManagers["Audio Category Managers"]
    
    block:categories["Category Layer"]
        columns 3
        BGMManager["BGMManager<br/>(Background)"]
        AmbientManager["AmbientManager<br/>(Environment)"]
        EffectManager["EffectManager<br/>(Sound Effects)"]
    end
    
    SpecializedSystems["Specialized Audio Systems"]
    
    block:specialized["Specialized Layer"]
        columns 3
        
        block:spatial["SpatialAudioMgr<br/>(3D Positioning)"]
            columns 1
            UnityAudio["Unity Audio<br/>3D Engine"]
        end
        
        block:dynamic["DynamicAudioEnv<br/>(Adaptive Audio)"]
            columns 1
            WeatherTime["Weather/Time<br/>Adaptation"]
        end
        
        block:stealth["StealthAudioCoord<br/>(Stealth System)"]
            columns 1
            NPCAudio["NPCAudioSensor<br/>AI Detection"]
        end
    end
    
    AudioManager --> CategoryManagers
    CategoryManagers --> categories
    categories --> SpecializedSystems
    SpecializedSystems --> specialized
```

### ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TD
    Awake["SystemInitializer.Awake()"]
    Discover["DiscoverSystems()"]
    IInitializable["IInitializable Components"]
    
    subgraph Processing["Parallel Processing"]
        SortPriority["Sort by Priority"]
        ServiceRegistrable["IServiceLocatorRegistrable"]
    end
    
    Initialize["Initialize()"]
    RegisterServices["RegisterServices()"]
    
    subgraph Services["Service Initialization"]
        AudioService["AudioService"]
        GameManager["GameManager"]
        UIService["UIService"]
        Others["..."]
    end
    
    ServiceRegister["ServiceLocator.Register()"]
    ServiceAvailable["Service Available"]
    
    Awake --> Discover
    Discover --> IInitializable
    IInitializable --> SortPriority
    IInitializable --> ServiceRegistrable
    SortPriority --> Initialize
    ServiceRegistrable --> RegisterServices
    Initialize --> AudioService
    Initialize --> GameManager
    Initialize --> UIService
    Initialize --> Others
    RegisterServices --> ServiceRegister
    ServiceRegister --> ServiceAvailable
    
    style Awake fill:#e8f5e8
    style Processing fill:#e1f5fe
    style Services fill:#f3e5f5
    style ServiceAvailable fill:#c8e6c9
```

---

## ã¾ã¨ã‚

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å¼·ã¿

1. **é«˜ã„æ‹¡å¼µæ€§**: ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰æ§‹é€ ã«ã‚ˆã‚‹é–¢å¿ƒäº‹ã®åˆ†é›¢
2. **ç–çµåˆè¨­è¨ˆ**: ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã¨ã‚µãƒ¼ãƒ“ã‚¹ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ã®çµ„ã¿åˆã‚ã›
3. **ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§**: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãƒ™ãƒ¼ã‚¹ã®è¨­è¨ˆ
4. **æ®µéšçš„ç§»è¡Œ**: å¾Œæ–¹äº’æ›æ€§ã‚’ä¿ã¡ãªãŒã‚‰ã®ãƒ¢ãƒ€ãƒ³åŒ–
5. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**: ObjectPoolã€HashSetç­‰ã®æœ€é©åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³

### ä»Šå¾Œã®é€²åŒ–æ–¹å‘

1. **Service Locator â†’ Dependency Injection**: ã‚ˆã‚Šæ˜ç¤ºçš„ãªä¾å­˜é–¢ä¿‚ç®¡ç†
2. **MVVM ãƒ‘ã‚¿ãƒ¼ãƒ³å°å…¥**: UIå±¤ã®ã•ã‚‰ãªã‚‹åˆ†é›¢
3. **Reactive Extensions**: ã‚ˆã‚Šå®£è¨€çš„ãªã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
4. **ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–**: å¤§è¦æ¨¡é–‹ç™ºã§ã®ç‹¬ç«‹æ€§å‘ä¸Š

### å“è³ªä¿è¨¼

- **åå‰ç©ºé–“çµ±ä¸€**: `asterivo.Unity60.*` ãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Œå…¨çµ±ä¸€æ¸ˆã¿ âœ…
- **ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼**: 0ä»¶ âœ…
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ä¸€è²«æ€§**: Core/Featuresåˆ†é›¢ç¶­æŒ âœ…
- **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**: æ®µéšçš„æ‹¡å……ä¸­ ğŸ”„

ã“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ã€Unity 6ã®æœ€æ–°æ©Ÿèƒ½ã‚’æ´»ç”¨ã—ãªãŒã‚‰ã€ä¿å®ˆæ€§ã¨æ‹¡å¼µæ€§ã‚’ä¸¡ç«‹ã—ãŸè¨­è¨ˆã¨ãªã£ã¦ã„ã¾ã™ã€‚

---

## å¤‰æ›´å±¥æ­´

### 2025å¹´9æœˆ11æ—¥ - Mermaidå›³è¡¨å¤‰æ›
- å…¨15ç®‡æ‰€ã®å›³ã‚’Mermaidå½¢å¼ã«å¤‰æ›
- è¦–è¦šçš„éšå±¤æ§‹é€ : block-betaå½¢å¼æ¡ç”¨
- ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³: flowchartå½¢å¼ã§çµ±ä¸€
- ä¾å­˜é–¢ä¿‚å›³: graphå½¢å¼ã§è¡¨ç¾
- è‰²åˆ†ã‘ã¨ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã‚’çµ±ä¸€ã—ã¦å¯èª­æ€§å‘ä¸Š
- GitHub/GitLabç­‰ã§ã®è¡¨ç¤ºäº’æ›æ€§å‘ä¸Š

### 2025å¹´9æœˆ11æ—¥ - åˆç‰ˆä½œæˆ
- ç¾åœ¨å®Ÿè£…ã®åŒ…æ‹¬çš„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è§£èª¬
- Phase 1å®Œäº†çŠ¶æ³ã®è©³ç´°è¨˜éŒ²
- 15ç¨®é¡ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³ä½œæˆ
- å®Ÿè£…ãƒ™ãƒ¼ã‚¹ã®æŠ€è¡“ä»•æ§˜æ›¸å®Œæˆ

---

*Document generated by Claude Code Assistant*  
*Last updated: 2025å¹´9æœˆ11æ—¥*