# 3DアクションRPG テンプレート追加要件定義書

**作成日時**: 2025年9月12日
**プロジェクト**: URP3D_Base01 - Unity 6 3Dゲーム基盤プロジェクト
**作成者**: Gemini

---

## 1. 概要

このドキュメントは、現在の「URP3D_Base01」プロジェクトを、より具体的な「3DアクションRPG」のテンプレートとして活用するために必要となる追加要件を定義します。
各要件がプロジェクトのアーキテクチャ（Core層またはFeatures層）のどちらに配置されるべきかを明確にすることで、設計の一貫性と保守性を維持することを目的とします。

---

## 2. 追加要件と階層配置

| # | 追加要件 | 概要 | 適切な階層 | 理由 |
|---|---|---|---|---|
| 1 | **戦闘システム (コンバット)** | プレイヤーと敵キャラクターの攻撃、防御、回避、スキル発動などのリアルタイムなアクションを管理するシステム。当たり判定（コリジョン）の処理も含む。 | **Features** | ゲームのジャンル（アクションRPG）に特化した中核的な機能であり、汎用的なCore層には含まれないため。 |
| 2 | **スキル・アビリティシステム** | プレイヤーや敵が使用するアクティブスキル（例：魔法、必殺技）やパッシブスキル（例：攻撃力アップ）を定義・管理するシステム。 | **Features** | スキルの具体的な効果や種類はゲームデザインに強く依存するため、Features層で実装するのが適切。 |
| 3 | **キャラクターシステム** | プレイヤー、NPC、敵キャラクターのステータス（HP, MP, 攻撃力など）、レベルアップ処理、経験値管理を行うシステム。 | **Features** | RPGの根幹機能だが、ステータスの種類や成長曲線はゲームごとに異なるため、Features層で実装する。 |
| 4 | **インベントリ・アイテムシステム** | 武器、防具、消費アイテムなどを管理するインベントリ機能と、アイテムのデータ（効果、価格など）を管理するシステム。 | **Features** | アイテムの種類や効果はゲーム固有のデータであり、Features層で管理するのが自然。 |
| 5 | **装備システム** | プレイヤーが武器や防具をキャラクターに装備・変更できるシステム。装備によってキャラクターのステータスが変動する処理も含む。 | **Features** | インベントリシステムと密接に関連する、ゲーム固有の機能であるため。 |
| 6 | **クエスト・ストーリーシステム** | メインクエストやサブクエストの受注、進行管理、報酬の処理を行うシステム。ストーリーの進行フラグ管理も含む。 | **Features** | ゲームの物語や進行は完全にそのタイトル固有のものであるため、Features層に配置する。 |
| 7 | **AIシステム (敵・NPC)** | 敵キャラクターの思考ルーチン（プレイヤーの追跡、攻撃、待機など）や、NPCの対話、移動などを制御するAI。 | **Features** | 敵やNPCの振る舞いはゲームデザインの中核であり、汎用的な振る舞いではないため。 |
| 8 | **UI/HUDシステム** | HPバー、MPバー、ミニマップ、クエストログ、スキルショートカットなど、ゲームプレイに必要な情報を表示するUI全般。 | **Features** | 表示する情報やデザインはゲームに特化しているため。ただし、UIの基盤となるコンポーネント（例：ボタン）はCore層にあるものを利用する。 |
| 9 | **セーブ・ロードシステム** | ゲームの進行状況（プレイヤーの位置、ステータス、クエスト進行度など）を保存し、後で再開できるようにするシステム。 | **Features** | 何をセーブするかというデータ構造がゲームの機能に強く依存するため。セーブデータのシリアライズといった汎用処理はCore層の機能を利用する。 |
| 10| **ステートマシン (状態管理)** | キャラクターの状態（待機、移動、攻撃、被ダメージ、死亡など）を管理するための汎用的な仕組み。 | **Core** | キャラクターの状態遷移という概念は、アクションゲームだけでなく多くのジャンルで再利用可能な汎用パターンであるため。 |
| 11| **汎用データ構造** | キャラクターのステータスやアイテムの基本情報を保持するための、汎用的なデータクラスやScriptableObjectの基底クラス。 | **Core** | 特定のゲームデザインに依存しない、基本的なデータの「型枠」であり、様々なFeaturesで再利用されるため。 |

---

## 3. まとめ

### Core層に追加するもの
- **ステートマシン**や**汎用データ構造の基底クラス**など、他の多くの機能から再利用される、抽象的で汎用的なパターンや仕組み。

### Features層に追加するもの
- **戦闘、スキル、クエスト、AI**など、ゲームのジャンルを「3DアクションRPG」と定義づける、具体的でゲームデザインに直結する機能のほぼすべて。

この階層分離の原則を遵守することで、プロジェクトの基盤（Core）の安定性を保ちながら、ゲーム固有の機能（Features）を効率的に開発・拡張していくことが可能になります。
